<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Next Book - Recomendações</title>
<style>
  body {
    font-family: "Segoe UI", sans-serif;
    background-color: #faf8fc;
    margin: 0;
    color: #333;
  }

  header {
    background-color: #4b237a;
    color: white;
    padding: 30px 0;
    text-align: center;
  }

  header h1 {
    font-size: 2.2em;
    margin-bottom: 5px;
  }

  header p {
    font-size: 1em;
    opacity: 0.8;
  }

  .book-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 30px;
    padding: 40px;
  }

  .book-card {
    width: 320px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    overflow: hidden;
    border: 2px solid #ddd;
  }

  .book-card img {
    width: 100%;
    height: 420px;
    object-fit: cover;
  }

  .book-content {
    padding: 15px;
  }

  .section-title {
    background-color: #45246e;
    color: white;
    padding: 6px 10px;
    border-radius: 3px;
    display: inline-block;
    font-weight: bold;
    font-size: 0.9em;
    margin-bottom: 8px;
  }

  .book-content p {
    font-size: 0.9em;
    line-height: 1.5;
  }

  footer {
    background-color: #4b237a;
    color: white;
    padding: 40px;
    text-align: center;
  }

  footer h2 {
    font-size: 2em;
    margin-bottom: 10px;
  }

  footer p {
    font-size: 1.1em;
    opacity: 0.9;
  }
</style>
</head>
<body>

<header>
  <h1>Next Book</h1>
  <p>Histórias para levar você a outro mundo.</p>
</header>

<section class="book-container" id="bookContainer">
  <!-- Os livros serão gerados automaticamente aqui -->
</section>

<footer>
  <h2>Próxima leitura te espera</h2>
  <p>Descubra histórias de outro mundo<p> 
# Creating a self-contained single HTML file with embedded JSON for ~400 books.
# The file will be saved to /mnt/data/books_site.html and a download link will be shown after creation.
# The generated site includes search, filters (genre, age), pagination, and a card layout inspired by the provided slide.
import json
from pathlib import Path
out_path = Path("/mnt/data/books_site.html")

# Generate 400 sample books with varied genres: Fiction (ficção), Fantasy (fantasia), Romance, Terror
genres = ["Ficção", "Fantasia", "Romance", "Terror"]
authors = ["Ana Silva", "Bruno Costa", "Carla Nunes", "Daniel Rocha", "Eduarda Lima", "Felipe Araujo", 
           "Gabriela Moura", "Henrique Dias", "Isabela Pinto", "João Marques"]
summaries = [
    "Uma narrativa envolvente sobre escolhas, perdas e recomeços.",
    "Conflitos sobrenaturais e um passado que volta para assombrar.",
    "Um romance moderno que explora identidades e segredos familiares.",
    "Aventura épica, reinos em disputa e heróis relutantes.",
    "Um suspense psicológico que desvenda a linha entre real e imaginário.",
    "Histórias interligadas de amor, traição e redenção.",
    "Um mergulho em mundos mágicos e tradições ancestrais.",
    "Mistério crescente, reviravoltas e um desfecho inesperado.",
    "Personagens complexos em cenários urbanos e sombrios.",
    "Paixão proibida e conflitos que atravessam gerações."
]

books = []
for i in range(1, 401):
    genre = genres[(i-1) % len(genres)]
    title = f"{genre} - Título Exemplar {i}"
    author = authors[(i-1) % len(authors)]
    summary = summaries[i % len(summaries)]
    # add some small variation
    summary_full = f"{summary} ({genre.lower()}) Este é o exemplar número {i}."
    age = "+14" if genre != "Romance" else "+12"
    price = round(20 + (i * 0.37) % 100, 2)  # pseudo-random price
    cover = f"https://via.placeholder.com/220x320.png?text=Cover+{i}"
    books.append({
        "id": i,
        "title": title,
        "author": author,
        "genre": genre,
        "summary": summary_full,
        "age": age,
        "price": f"R$ {price:.2f}",
        "cover": cover
    })

# Build a single HTML file with embedded books variable to avoid fetch/CORS issues.
html = f"""<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Catálogo: Ficção, Fantasia, Romance e Terror — 400 livros</title>
<style>
/* Basic reset */
* {{ box-sizing: border-box; margin: 0; padding: 0; }}
body {{ font-family: 'Segoe UI', Roboto, Arial, sans-serif; background:#faf7f9; color:#3a1f2b; line-height:1.4; padding:20px; }}

/* Header */
.header {{ display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:18px; }}
.header h1 {{ font-size:20px; color:#2b3b5a; }}

/* Controls */
.controls {{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; }}
.controls input[type="search"] {{ padding:8px 10px; border-radius:6px; border:1px solid #cfc9d3; width:260px; }}
.controls select, .controls button {{ padding:8px 10px; border-radius:6px; border:1px solid #cfc9d3; background:white; }}

/* Grid */
.grid {{ display:grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap:18px; }}

/* Card similar to the slide: left cover, right info with ribbons */
.card {{ display:flex; gap:14px; background:white; padding:14px; border-radius:10px; box-shadow: 0 6px 18px rgba(30,20,30,0.06); }}
.card .cover {{ width:140px; flex-shrink:0; }}
.card .cover img {{ width:100%; height:auto; border-radius:6px; object-fit:cover; }}

.info {{ flex:1; display:flex; flex-direction:column; gap:8px; }}

/* Ribbons */
.ribbon {{ display:inline-block; padding:8px 16px; color:white; border-radius:4px; font-weight:600; margin-bottom:6px; }}
.ribbon.resumo {{ background:#2f2fa3; }}
.ribbon.faixa {{ background:#0f5f63; }}
.ribbon.preco {{ background:#2f2fa3; }}

/* Summary */
.summary {{ font-size:14px; color:#4a2130; max-height:72px; overflow:hidden; text-overflow:ellipsis; }}

/* Meta row */
.meta {{ display:flex; gap:12px; align-items:center; font-size:13px; color:#5b3b45; }}

/* Pagination */
.pagination {{ display:flex; gap:8px; align-items:center; margin-top:16px; flex-wrap:wrap; }}
.page-btn {{ padding:6px 10px; border-radius:6px; border:1px solid #cfc9d3; background:white; cursor:pointer; }}
.page-btn.active {{ background:#2f2fa3; color:white; border-color: #2f2fa3; }}

/* Responsive adjustments */
@media (max-width:520px) { .card {{ flex-direction:column; align-items:center; }} .cover {{ width:60%; }} .summary {{ max-height:none; }}
}
</style>
</head>
<body>
<div class="header">
  <h1>Catálogo — Ficção, Fantasia, Romance e Terror (400 livros)</h1>
  <div class="controls">
    <input id="search" type="search" placeholder="Pesquisar por título, autor ou palavra..." />
    <select id="genreFilter"><option value="">Todos os gêneros</option></select>
    <select id="ageFilter"><option value="">Todas as idades</option><option value="+12">+12</option><option value="+14">+14</option></select>
    <button id="clear">Limpar</button>
  </div>
</div>

<div id="results" class="grid" role="list"></div>

<div class="pagination" id="pagination"></div>

<script>
// Embedded books data (400 items)
const books = {json.dumps(books, ensure_ascii=False)};

// Populate genre filter
const genres = Array.from(new Set(books.map(b => b.genre))).sort();
const genreSelect = document.getElementById('genreFilter');
genres.forEach(g => {{ const opt = document.createElement('option'); opt.value = g; opt.textContent = g; genreSelect.appendChild(opt); } });

let page = 1;
const perPage = 12;
let currentBooks = books.slice();

function render() {{
  const start = (page-1)*perPage;
  const slice = currentBooks.slice(start, start+perPage);
  const container = document.getElementById('results');
  container.innerHTML = '';
  if(slice.length === 0) container.innerHTML = '<p>Nenhum livro encontrado com esses filtros.</p>';
  for(const b of slice) {{
    const card = document.createElement('article');
    card.className = 'card';
    card.innerHTML = `
      <div class="cover"><img src="${b.cover}" alt="Capa de ${b.title}" loading="lazy"></div>
      <div class="info">
        <div class="ribbon resumo">Resumo</div>
        <h3 style="margin-bottom:4px;">${b.title}</h3>
        <div class="meta"><strong>Autor:</strong>&nbsp;${b.author} &nbsp;•&nbsp; <strong>Gênero:</strong>&nbsp;${b.genre}</div>
        <p class="summary">${b.summary}</p>
        <div style="margin-top:auto; display:flex; justify-content:space-between; align-items:center;">
          <div>
            <div class="ribbon faixa" style="display:inline-block; margin-top:6px;">Faixa etária: ${b.age}</div>
          </div>
          <div style="text-align:right;">
            <div class="ribbon preco">Preço</div>
            <div style="margin-top:6px; font-weight:700;">${b.price}</div>
          </div>
        </div>
      </div>`;
    container.appendChild(card);
  }}
  renderPagination();
}}

function renderPagination() {{
  const total = Math.ceil(currentBooks.length / perPage);
  const container = document.getElementById('pagination');
  container.innerHTML = '';
  if(total <= 1) return;
  // Prev
  const prev = document.createElement('button');
  prev.className = 'page-btn';
  prev.textContent = 'Anterior';
  prev.disabled = page === 1;
  prev.onclick = () => {{ if(page>1) {{ page--; render(); }} }};
  container.appendChild(prev);
  // Page numbers (show limited window)
  const windowSize = 7;
  let start = Math.max(1, page - Math.floor(windowSize/2));
  let end = Math.min(total, start + windowSize -1);
  if(end - start + 1 < windowSize) start = Math.max(1, end - windowSize +1);
  for(let p = start; p<=end; p++) {{
    const btn = document.createElement('button');
    btn.className = 'page-btn' + (p === page ? ' active' : '');
    btn.textContent = p;
    btn.onclick = () => {{ page = p; render(); }};
    container.appendChild(btn);
  }}
  // Next
  const next = document.createElement('button');
  next.className = 'page-btn';
  next.textContent = 'Próximo';
  next.disabled = page === total;
  next.onclick = () => {{ if(page<total) {{ page++; render(); }} }};
  container.appendChild(next);
}}

// Search and filters
const searchInput = document.getElementById('search');
searchInput.addEventListener('input', applyFilters);
genreSelect.addEventListener('change', applyFilters);
document.getElementById('ageFilter').addEventListener('change', applyFilters);
document.getElementById('clear').addEventListener('click', () => {{ searchInput.value=''; genreSelect.value=''; document.getElementById('ageFilter').value=''; applyFilters(); } });

function applyFilters() {{
  const q = searchInput.value.trim().toLowerCase();
  const genre = genreSelect.value;
  const age = document.getElementById('ageFilter').value;
  currentBooks = books.filter(b => {{
    const matchesQ = q === '' || (b.title + ' ' + b.author + ' ' + b.summary).toLowerCase().includes(q);
    const matchesGenre = !genre || b.genre === genre;
    const matchesAge = !age || b.age === age;
    return matchesQ && matchesGenre && matchesAge;
  }});
  page = 1;
  render();
}}

// Initial render
render();
</script>
</body>
</html>
"""
